<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>To‚ÄëDo List</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>* { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; }
    body {
      font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      /* Animated rainbow gradient background */
      --rainbow: linear-gradient(120deg, #ff3b3b, #ff7a00, #ffd400, #40c057, #4dabf7, #845ef7, #e056fd);
      background: var(--rainbow);
      background-size: 400% 400%;
      animation: rainbowShift 18s ease infinite;
      color: #0b1020;
      min-height: 100vh;
      display: flex;
      align-items: flex-start;
      justify-content: center;
    }
    
    .container {
      width: 100%;
      max-width: 720px;
      padding: 24px 16px 64px;
      /* glass card over rainbow */
      background: rgba(255, 255, 255, 0.14);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      backdrop-filter: blur(8px);
    }
    
    .header {
      display: grid;
      gap: 12px;
      margin-bottom: 12px;
    }
    
    .app-title { margin: 0; font-size: 28px; letter-spacing: 0.5px; color: #0b1020; }
    
    #task-form { display: grid; grid-template-columns: 1fr auto; gap: 8px; }
    
    #task-input {
      padding: 12px 14px;
      border-radius: 12px;
      border: 2px solid transparent;
      background:
        linear-gradient(#ffffff, #ffffff) padding-box,
        linear-gradient(120deg, #ff7a00, #ffd400, #4dabf7) border-box;
      color: #0b1020;
    }
    
    .btn {
      padding: 10px 14px;
      border: 0;
      background: linear-gradient(120deg, #ff7a00, #ffd400, #4dabf7);
      color: #0b1020;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
    }
    .btn:hover { filter: brightness(0.95); }
    .btn:active { transform: translateY(1px); }
    .btn.primary { background: linear-gradient(120deg, #845ef7, #4dabf7); color: #ffffff; }
    .btn.danger { background: linear-gradient(120deg, #f67373, #dd9d61); color: #ffffff; }
    
    .controls { display: flex; justify-content: space-between; margin: 8px 0 12px; }
    .control-group { display: flex; gap: 8px; flex-wrap: wrap; }
    
    .task-list { list-style: none; margin: 0; padding: 0; display: grid; gap: 10px; }
    
    .task-item {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 8px;
      padding: 12px;
      border: 2px solid transparent;
      border-radius: 14px;
      background:
        linear-gradient(#ffffff, #ffffff) padding-box,
        linear-gradient(120deg, #f0d54f, #7aee8f, #7ab8ea, #9880e2) border-box;
    }
    
    .task { display: inline-flex; align-items: center; gap: 10px; }
    .task-title { outline: none; color: #0b1020; }
    .task-title.completed { text-decoration: line-through; color: #64748b; }
    
    .task-toggle { width: 18px; height: 18px; cursor: pointer; accent-color: #845ef7; }
    
    .task-actions { display: inline-flex; gap: 6px; }
    .icon-btn {
      background:
        linear-gradient(#ffffff, #ffffff) padding-box,
        linear-gradient(120deg, #4dabf7, #845ef7) border-box;
      border: 2px solid transparent;
      color: #0b1020;
      border-radius: 10px;
      padding: 6px 10px;
      cursor: pointer;
    }
    .icon-btn:hover { filter: brightness(0.96); }
    
    @media (max-width: 480px) {
      .app-title { font-size: 24px; }
    }
    
    @keyframes rainbowShift {
      0%   { background-position: 0% 50%; }
      50%  { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    </style>
</head>
<body>
  <main class="container">
    <header class="header">
      <h1 class="app-title">To‚ÄëDo List</h1>
      <form id="task-form" autocomplete="off" aria-label="Add a new task">
        <input id="task-input" name="task" type="text" placeholder="Add a new task..." aria-label="Task title" />
        <button type="submit" class="btn primary" aria-label="Add task">Add</button>
      </form>
    </header>

    <section class="controls" aria-label="Task controls">
      <div class="control-group">
        <button id="clear-completed" class="btn" type="button">Clear Completed</button>
        <button id="clear-all" class="btn danger" type="button">Clear All</button>
      </div>
    </section>

    <section>
      <ul id="task-list" class="task-list" aria-live="polite" aria-label="Task list"></ul>
    </section>
  </main>

  <template id="task-item-template">
    <li class="task-item" data-id="">
      <label class="task">
        <input type="checkbox" class="task-toggle" aria-label="Mark complete" />
        <span class="task-title" tabindex="0"></span>
      </label>
      <div class="task-actions">
        <button class="icon-btn edit" title="Edit task" aria-label="Edit task">‚úèÔ∏è</button>
        <button class="icon-btn delete" title="Delete task" aria-label="Delete task">üóëÔ∏è</button>
      </div>
    </li>
  </template>

  <script>(function () {
    const STORAGE_KEY = "todo.tasks.v1";
  
    /** @type {{id:string,title:string,completed:boolean,createdAt:number}[]} */
    let tasks = [];
  
    // Elements
    const form = document.getElementById("task-form");
    const input = document.getElementById("task-input");
    const list = document.getElementById("task-list");
    const clearCompletedBtn = document.getElementById("clear-completed");
    const clearAllBtn = document.getElementById("clear-all");
    const template = document.getElementById("task-item-template");
  
    function load() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        tasks = raw ? JSON.parse(raw) : [];
        if (!Array.isArray(tasks)) tasks = [];
      } catch {
        tasks = [];
      }
    }
  
    function save() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks));
    }
  
    function createId() {
      return Date.now().toString(36) + Math.random().toString(36).slice(2, 8);
    }
  
    function render() {
      list.innerHTML = "";
      const frag = document.createDocumentFragment();
      tasks.forEach((task) => {
        const node = /** @type {HTMLLIElement} */ (template.content.firstElementChild.cloneNode(true));
        node.dataset.id = task.id;
  
        const checkbox = node.querySelector(".task-toggle");
        const titleSpan = node.querySelector(".task-title");
        const editBtn = node.querySelector(".edit");
        const deleteBtn = node.querySelector(".delete");
  
        checkbox.checked = task.completed;
        titleSpan.textContent = task.title;
        titleSpan.classList.toggle("completed", task.completed);
  
        checkbox.addEventListener("change", () => toggleComplete(task.id, checkbox.checked));
        deleteBtn.addEventListener("click", () => removeTask(task.id));
        editBtn.addEventListener("click", () => beginEdit(node, task));
  
        // Keyboard support: Enter to toggle, Delete to remove, E to edit
        node.addEventListener("keydown", (e) => {
          if (e.key === "Delete") {
            e.preventDefault();
            removeTask(task.id);
          } else if (e.key.toLowerCase() === "e") {
            e.preventDefault();
            beginEdit(node, task);
          } else if (e.key === "Enter" && e.target === node) {
            e.preventDefault();
            toggleComplete(task.id, !task.completed);
          }
        });
  
        frag.appendChild(node);
      });
      list.appendChild(frag);
    }
  
    function addTask(title) {
      const trimmed = title.trim();
      if (!trimmed) return;
      tasks.unshift({ id: createId(), title: trimmed, completed: false, createdAt: Date.now() });
      save();
      render();
    }
  
    function removeTask(id) {
      tasks = tasks.filter((t) => t.id !== id);
      save();
      render();
    }
  
    function toggleComplete(id, completed) {
      const t = tasks.find((x) => x.id === id);
      if (!t) return;
      t.completed = !!completed;
      save();
      render();
    }
  
    function beginEdit(node, task) {
      const titleSpan = node.querySelector(".task-title");
      const actions = node.querySelector(".task-actions");
  
      // Build inline editor
      const input = document.createElement("input");
      input.type = "text";
      input.value = task.title;
      input.className = "edit-input";
      input.style.padding = "6px 8px";
      input.style.borderRadius = "8px";
      input.style.border = "1px solid #334155";
      input.style.background = "#111827";
      input.style.color = "#e5e7eb";
      input.setAttribute("aria-label", "Edit task title");
  
      const saveBtn = document.createElement("button");
      saveBtn.textContent = "Save";
      saveBtn.className = "btn primary";
  
      const cancelBtn = document.createElement("button");
      cancelBtn.textContent = "Cancel";
      cancelBtn.className = "btn";
  
      // Replace display with editor
      titleSpan.replaceWith(input);
      const oldActions = actions.cloneNode(true);
      actions.innerHTML = "";
      actions.appendChild(saveBtn);
      actions.appendChild(cancelBtn);
      input.focus();
      input.select();
  
      function commit() {
        const value = input.value.trim();
        if (!value) {
          cancel();
          return;
        }
        task.title = value;
        save();
        render();
      }
  
      function cancel() {
        // Restore original UI without saving
        render();
      }
  
      saveBtn.addEventListener("click", commit);
      cancelBtn.addEventListener("click", cancel);
      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") commit();
        if (e.key === "Escape") cancel();
      });
    }
  
    // Event bindings
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      addTask(input.value);
      input.value = "";
      input.focus();
    });
  
    clearCompletedBtn.addEventListener("click", () => {
      tasks = tasks.filter((t) => !t.completed);
      save();
      render();
    });
  
    clearAllBtn.addEventListener("click", () => {
      if (tasks.length === 0) return;
      const ok = confirm("Clear all tasks? This cannot be undone.");
      if (!ok) return;
      tasks = [];
      save();
      render();
    });
  
    // Init
    load();
    render();
  })();
  
  
  </script>
  
  
</body>
</html>


